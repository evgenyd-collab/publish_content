# Molecules Rules

Molecules - —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —Å–æ—Å—Ç–æ—è—â–∏–µ –∏–∑ –∞—Ç–æ–º–æ–≤ –∏ –∏–º–µ—é—â–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å.
–í—Ç–æ—Ä–æ–π —É—Ä–æ–≤–µ–Ω—å –≤ –∏–µ—Ä–∞—Ä—Ö–∏–∏ –∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ –¥–∏–∑–∞–π–Ω–∞.

# Structure
–û—Å–Ω–æ–≤–Ω–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã: `src/components/molecules`.
`bonus-details-page/` - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–µ—Ç–∞–ª–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–æ–Ω—É—Å–∞.
    `BonusDetailsPage` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–ª–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–µ—Ç–∞–ª–µ–π –±–æ–Ω—É—Å–∞.
        –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –±–æ–Ω—É—Å–∞ –ø–æ ID –∏–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
        –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –±–æ–Ω—É—Å–µ.
        –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—Å–ª–æ–≤–∏–π.
        –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫.
`bonus-item/` - —ç–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫–∞ –±–æ–Ω—É—Å–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ.
    `BonusItem` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å—Ç—Ä–æ–∫–∏ —Ç–∞–±–ª–∏—Ü—ã —Å –¥–∞–Ω–Ω—ã–º–∏ –±–æ–Ω—É—Å–∞.
        –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–±—ä–µ–∫—Ç bonus —Å –ø–æ–ª–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.
        –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø, —Å—Ç–∞—Ç—É—Å, –¥–∞—Ç—ã).
        –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏–∫–æ–Ω–∫–∏ –¥–æ–º–µ–Ω–æ–≤ (‚öΩÔ∏è –¥–ª—è sport, üêñ –¥–ª—è casino).
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫–∏ –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –¥–µ—Ç–∞–ª—è–º.
        –ü–∞—Ä—Å–∏—Ç JSON –∏–∑ –ø–æ–ª—è terms –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –¥–æ–º–µ–Ω–∞.
        –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å –º–æ–¥–∞–ª–∞–º–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
`pagination/` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π.
    `Pagination` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º.
        –ü—Ä–∏–Ω–∏–º–∞–µ—Ç currentPage, totalPages, onPageChange.
        –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–æ–º–µ—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ —Å—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏.
        –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–Ω–æ–≥–æ—Ç–æ—á–∏–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤.
        –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–ª–∏–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É.

# Molecular Design Principles

## Characteristics of Molecules
- **–°–æ—Å—Ç–∞–≤–Ω—ã–µ**: –°–æ—Å—Ç–æ—è—Ç –∏–∑ –∞—Ç–æ–º–æ–≤ –∏ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ—Å—Ç—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
- **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ**: –ò–º–µ—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é –±–∏–∑–Ω–µ—Å-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ**: –ú–æ–≥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö
- **–°–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ**: –°–æ–¥–µ—Ä–∂–∞—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –ª–æ–≥–∏–∫—É
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ**: –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è

## Design Guidelines
- –ö–æ–º–ø–æ–∑–∏—Ü–∏—è –∏–∑ –∞—Ç–æ–º–æ–≤
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
- –ß–µ—Ç–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ props
- –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

# Component Specifications

## BonusDetailsPage
```jsx
const BonusDetailsPage = () => {
  const { id } = useParams();
  const [bonus, setBonus] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    fetchBonusDetails(id);
  }, [id]);

  const fetchBonusDetails = async (bonusId) => {
    try {
      setLoading(true);
      const response = await fetch(`${API_ENDPOINT}/bonuses/${bonusId}`);
      const data = await response.json();
      setBonus(data);
    } catch (err) {
      setError(err.message);
    } finally {
      setLoading(false);
    }
  };

  if (loading) return <Spinner size="large" />;
  if (error) return <div className="error">{error}</div>;
  if (!bonus) return <div className="not-found">Bonus not found</div>;

  return (
    <div className="bonus-details-page">
      <BonusHeader bonus={bonus} />
      <BonusInfo bonus={bonus} />
      <BonusTermsHistory history={bonus.terms_history} />
    </div>
  );
};
```

**Features:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ URL –ø–∞—Ä–∞–º–µ—Ç—Ä—É
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–æ–Ω—É—Å–µ
- –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π —É—Å–ª–æ–≤–∏–π

**Usage:**
```jsx
// –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–æ—É—Ç–∏–Ω–≥–µ
<Route path="/bonuses/:id" element={<BonusDetailsPage />} />
```

## BonusItem
```jsx
const BonusItem = ({ bonus, onEdit, onStatusChange }) => {
  const [updatedBonus, setUpdatedBonus] = useState(bonus);
  
  useEffect(() => {
    setUpdatedBonus(bonus);
  }, [bonus]);

  const getDomainIcon = () => {
    try {
      const terms = typeof updatedBonus.terms === 'string' 
        ? JSON.parse(updatedBonus.terms) 
        : updatedBonus.terms;
      
      return terms?.domain === 'casino' ? 'üêñ' : '‚öΩÔ∏è';
    } catch (error) {
      console.error('Error parsing terms:', error);
      return '‚öΩÔ∏è'; // Default to sport
    }
  };

  const handleClick = () => {
    navigate(`/bonuses/${updatedBonus.id}`);
  };

  return (
    <tr className="bonus-item" onClick={handleClick}>
      <td>
        <span role="img" aria-label={getDomainIcon() === 'üêñ' ? 'Casino' : 'Sport'}>
          {getDomainIcon()}
        </span>
      </td>
      <td>{updatedBonus.name}</td>
      <td>{updatedBonus.bonus_type}</td>
      <td>
        <StatusBadge status={updatedBonus.expiration_status} />
      </td>
      <td>{formatDate(updatedBonus.expiration_date)}</td>
      <td>
        <FlagsIndicator flags={{
          manual_url: updatedBonus.override_manual_url,
          manual_type: updatedBonus.override_manual_type,
          manual_terms: updatedBonus.override_manual_terms,
          manual_expiration: updatedBonus.override_manual_expiration
        }} />
      </td>
      <td>
        <IconButton 
          icon={<EditIcon />}
          onClick={(e) => {
            e.stopPropagation();
            onEdit(updatedBonus);
          }}
          ariaLabel="Edit bonus"
        />
      </td>
    </tr>
  );
};
```

**Props:**
- `bonus` - –æ–±—ä–µ–∫—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –±–æ–Ω—É—Å–∞
- `onEdit` - callback –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- `onStatusChange` - callback –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞

**Features:**
- –ü–∞—Ä—Å–∏–Ω–≥ JSON –∏–∑ –ø–æ–ª—è terms
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–æ–º–µ–Ω–∞ –¥–ª—è –∏–∫–æ–Ω–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–æ–≤ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∞—Ç–æ–º–∞–º–∏ (StatusBadge, FlagsIndicator, IconButton)

## Pagination
```jsx
const Pagination = ({ 
  currentPage, 
  totalPages, 
  onPageChange,
  maxVisiblePages = 5 
}) => {
  const getVisiblePages = () => {
    const pages = [];
    const startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
    const endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

    for (let i = startPage; i <= endPage; i++) {
      pages.push(i);
    }

    return pages;
  };

  const handlePageClick = (page) => {
    if (page !== currentPage && page >= 1 && page <= totalPages) {
      onPageChange(page);
    }
  };

  const visiblePages = getVisiblePages();

  return (
    <div className="pagination">
      <IconButton
        icon={<ChevronLeftIcon />}
        onClick={() => handlePageClick(currentPage - 1)}
        disabled={currentPage === 1}
        ariaLabel="Previous page"
      />
      
      {visiblePages[0] > 1 && (
        <>
          <button onClick={() => handlePageClick(1)}>1</button>
          {visiblePages[0] > 2 && <span className="ellipsis">...</span>}
        </>
      )}

      {visiblePages.map(page => (
        <button
          key={page}
          className={page === currentPage ? 'active' : ''}
          onClick={() => handlePageClick(page)}
        >
          {page}
        </button>
      ))}

      {visiblePages[visiblePages.length - 1] < totalPages && (
        <>
          {visiblePages[visiblePages.length - 1] < totalPages - 1 && (
            <span className="ellipsis">...</span>
          )}
          <button onClick={() => handlePageClick(totalPages)}>
            {totalPages}
          </button>
        </>
      )}

      <IconButton
        icon={<ChevronRightIcon />}
        onClick={() => handlePageClick(currentPage + 1)}
        disabled={currentPage === totalPages}
        ariaLabel="Next page"
      />
    </div>
  );
};
```

**Props:**
- `currentPage` - —Ç–µ–∫—É—â–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- `totalPages` - –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü
- `onPageChange` - callback –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- `maxVisiblePages` - –º–∞–∫—Å–∏–º—É–º –≤–∏–¥–∏–º—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç—Ä–∞–Ω–∏—Ü

**Features:**
- –£–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü
- –ú–Ω–æ–≥–æ—Ç–æ—á–∏–µ –¥–ª—è –±–æ–ª—å—à–∏—Ö –¥–∏–∞–ø–∞–∑–æ–Ω–æ–≤
- –°—Ç—Ä–µ–ª–∫–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases

# Data Management

## State Management
- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è UI –ª–æ–≥–∏–∫–∏
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö

## API Integration
- Fetch –∑–∞–ø—Ä–æ—Å—ã –≤ useEffect
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Retry –ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

## Data Processing
- –ü–∞—Ä—Å–∏–Ω–≥ JSON –¥–∞–Ω–Ω—ã—Ö
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

# Testing Guidelines

## Component Testing
```javascript
describe('BonusItem', () => {
  const mockBonus = {
    id: 1,
    name: 'Test Bonus',
    terms: JSON.stringify({ domain: 'sport' }),
    expiration_status: 'active'
  };

  it('should render bonus information correctly', () => {
    render(<BonusItem bonus={mockBonus} />);
    expect(screen.getByText('Test Bonus')).toBeInTheDocument();
  });

  it('should show sport icon for non-casino domain', () => {
    render(<BonusItem bonus={mockBonus} />);
    expect(screen.getByLabelText('Sport')).toBeInTheDocument();
  });

  it('should handle click navigation', () => {
    const mockNavigate = jest.fn();
    render(<BonusItem bonus={mockBonus} />);
    fireEvent.click(screen.getByRole('row'));
    expect(mockNavigate).toHaveBeenCalledWith('/bonuses/1');
  });
});
```

## Integration Testing
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å API
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞–≥—Ä—É–∑–∫–∏
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

# Performance Guidelines

## Optimization
- –ú–µ–º–æ–∏–∑–∞—Ü–∏—è —Ç—è–∂–µ–ª—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤
- Lazy loading –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤
- Debouncing –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

## Memory Management
- –û—á–∏—Å—Ç–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –≤ useEffect
- –û—Ç–º–µ–Ω–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π useEffect